<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Multi Stock Forecast</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <style>
        body {
            background-color: #121212;
            color: white;
            font-family: Arial, sans-serif;
            padding: 20px;
            /* NEW: ‡∏õ‡∏£‡∏±‡∏ö padding-bottom ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ Marquee ‡∏ó‡∏±‡∏ö‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ */
            padding-bottom: 60px;
        }
        h2 { color: #00c853; }

        /* --- Splash Screen --- */
        #splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #121212; /* ‡∏™‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö body */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100000; /* ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏™‡∏∏‡∏î */
            /* ‚¨áÔ∏è MODIFIED: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Animation ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å */
            transition: transform 0.6s ease-in-out, opacity 0.6s ease-in-out;
        }

        /* ‚¨áÔ∏è MODIFIED: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡∏™‡∏ß‡πà‡∏≤‡∏á, ‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà, ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏° animation */
        .splash-loading-text {
            margin-top: 20px;
            font-size: 2.2em; /* ‚¨ÖÔ∏è ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î */
            color: #FFF; /* ‚¨ÖÔ∏è ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡∏™‡∏ß‡πà‡∏≤‡∏á */
            letter-spacing: 1px;

            width: 0;
            overflow: hidden;
            white-space: nowrap;
            border-right: 3px solid #FFF; /* ‚¨ÖÔ∏è ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏∞‡∏û‡∏£‡∏¥‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≤‡∏ß‡∏î‡πâ‡∏ß‡∏¢ */

            animation:
                typing 1.2s steps(24, end) 0.5s forwards,
                blink-caret 0.75s step-end 0.5s infinite;
        }

        /* ‚¨áÔ∏è MODIFIED: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å fade-out ‡πÄ‡∏õ‡πá‡∏ô slide-up (splash-exit) */
        #splash-screen.splash-exit {
            transform: translateY(-100%);
            opacity: 0;
            visibility: hidden;
        }

        /* ‚¨áÔ∏è MODIFIED: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î font-size */
        #splash-screen .glow-gradient {
            font-size: 5.0em; /* ‚¨ÖÔ∏è ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ */
        }

        /* --- ‚≠êÔ∏è NEW: Matrix Splash Screen CSS ‚≠êÔ∏è --- */
        #matrix-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1; /* ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ï‡πâ‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ */
            background-color: #121212;
        }
        #splash-screen .glow-gradient,
        #splash-screen .splash-loading-text {
            position: relative;
            z-index: 2; /* ‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏¢‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠ canvas */
        }
        /* --- ‚≠êÔ∏è END NEW CSS ‚≠êÔ∏è --- */


        .stock-menu { margin-bottom: 12px; text-align:center; }
        .stock-menu a {
            margin-right: 15px; font-size: 1.1em; text-decoration: none; color: #00c853;
            padding: 5px 10px; border-radius: 5px;
            transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease;
            display: inline-block;
        }
        .stock-menu a:hover {
            background-color: #2c2c2c;
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        .stock-menu a.active { background-color: #00c853; color: black; }

        /* Timeframe bar */
        .tfbar { display:flex; gap:8px; justify-content:center; margin: 6px 0 12px; }
        .tfbar button {
             background:#1b1b1b; color:#ddd; border:1px solid #2b2b2b; border-radius:8px;
            padding:6px 10px; cursor:pointer; font-weight:600;
            transition: transform 0.2s ease, background 0.3s ease, color 0.3s ease, box-shadow 0.2s ease;
        }
        .tfbar button:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        .tfbar button.active { background:#00c853; color:#111; border-color:#00c853; }

        .result-box {
            display: block; margin: 20px auto 0 auto; font-size: 1em; background-color: #1e1e1e;
            padding: 12px 20px; border-radius: 8px; color: #ccc; box-shadow: 0 0 10px rgba(255, 255, 255, 0.05);
            line-height: 1.6; text-align: left; max-width: 700px; width: 90%;
        }
        .result-box strong { font-weight: 500; color: #ddd; }
        .pos { color: #00e676; }
        .neg { color: #ef5350; }

        #graph {
            width: min(100%, 1500px);
            aspect-ratio: 5 / 2;
            height: auto;
            margin: 0 auto;
            border-radius: 8px;
            overflow: hidden;
        }

        .custom-checkbox {
          display:inline-flex; align-items:center; position:absolute;
          cursor:pointer;
          margin: 0;
          font-size: 1.2em;
          user-select:none;
          width: auto;
          top: 20px;
          left: 20px;
          z-index: 2;
        }
        .custom-checkbox input { opacity:0; position:absolute; cursor:pointer; height:0; width:0; }
        .checkmark {
          height:20px; width:20px; background-color:#444; border-radius:4px;
          display:inline-flex; align-items:center; justify-content:center;
          margin-right:10px; transition:.3s; box-shadow: inset 0 0 3px #000;
          position:relative;
        }
        .checkmark::after {
          content:"‚úî"; position:absolute; font-size:14px; color:white;
          opacity:0; transition:opacity .2s ease;
        }
        input:checked + .checkmark::after { opacity:1; }

        #lstm-checkbox:checked + .checkmark { background-color:#ff5252; box-shadow:0 0 5px #ff5252; }
        #trans-checkbox:checked + .checkmark { background-color:#40c4ff; box-shadow:0 0 5px #40c4ff; }
        #tcn-checkbox:checked + .checkmark { background-color:#ffd740; box-shadow:0 0 5px #ffd740; }


        @keyframes animateGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .glow-gradient {
            font-size:2em;
            font-weight:bold;
            background: linear-gradient(90deg, #00e676, #00bfa5, #40c4ff, #00e676);
            -webkit-background-clip:text;
            -webkit-text-fill-color:transparent;
            letter-spacing:1px;
            background-size: 200% auto;
            animation: animateGradient 5s ease-in-out infinite;
        }

        #latest-date-info { text-align:center; margin-bottom: 8px; font-size:.95em; color:#bbb; min-height:24px; display:flex; align-items:center; justify-content:center; }

        /* Page Switch */
        .page-switch {
          position: fixed; top: 16px; right: 16px; z-index: 9999;
          background: #00c853; color: #111; text-decoration: none; padding: 10px 14px; border-radius: 10px; font-weight: 700;
          box-shadow: 0 6px 16px rgba(0,0,0,.35);
          transition: transform .2s ease, filter .2s ease, box-shadow .2s ease;
        }
        .page-switch:hover {
            filter: brightness(1.2);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            transform: scale(1.1);
        }
        .page-switch:active { transform: scale(.98); }


        /* Tutorial Button */
        .tutorial-button {
          position: fixed; top : 16px; left: 16px; z-index: 9999;
          background: #40c4ff; color: #111; text-decoration: none; padding: 10px 14px; border-radius: 10px; font-weight: 700;
          box-shadow: 0 6px 16px rgba(0,0,0,.35);
          transition: transform .2s ease, filter .2s ease, box-shadow .2s ease;
          cursor: pointer;
        }
        .tutorial-button:hover {
            filter: brightness(1.2);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            transform: scale(1.1);
        }
        .tutorial-button:active { transform: scale(.98); }

        /* ‚≠êÔ∏è 1. ‡πÄ‡∏û‡∏¥‡πà‡∏° CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° Glossary ‡πÉ‡∏´‡∏°‡πà ‚≠êÔ∏è */
        .glossary-button {
          position: fixed;
          top: 16px;
          left: 140px; /* ‚¨ÖÔ∏è ‡∏Ç‡∏¢‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏õ‡∏ó‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤‡∏à‡∏≤‡∏Å‡∏õ‡∏∏‡πà‡∏° Tutorial */
          z-index: 9999;
          background: #ffd740; /* ‚¨ÖÔ∏è ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏ò‡∏µ‡∏° TCN */
          color: #111;
          text-decoration: none;
          padding: 10px 14px;
          border-radius: 10px;
          font-weight: 700;
          box-shadow: 0 6px 16px rgba(0,0,0,.35);
          transition: transform .2s ease, filter .2s ease, box-shadow .2s ease;
          cursor: pointer;
        }
        .glossary-button:hover {
            filter: brightness(1.06);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            transform: scale(1.1); /* ‚¨ÖÔ∏è ‡πÉ‡∏ä‡πâ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô */
        }
        .glossary-button:active { transform: scale(.98); }


        /* Modal (Popup) */
        .modal {
          display: none; position: fixed; z-index: 10000;
          left: 0; top: 0; width: 100%; height: 100%;
          overflow: auto; background-color: rgba(0, 0, 0, 0.7);
          align-items: center; justify-content: center;
        }

        @keyframes animatePopup {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(10px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        .modal-content {
          background-color: #2c2c2c; color: white; margin: auto;
          padding: 20px; border: 1px solid #555; border-radius: 10px;
          width: 80%; max-width: 900px; position: relative;
          box-shadow: 0 10px 30px rgba(0,0,0,.5);
          animation: animatePopup 0.3s ease-out;
        }
        .modal-content img { width: 100%; height: auto; border-radius: 5px; }

        /* ‚≠êÔ∏è 2. ‡πÄ‡∏û‡∏¥‡πà‡∏° CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö List ‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡πÉ‡∏ô Modal ‚≠êÔ∏è */
        .glossary-list dl {
            padding: 0 15px;
        }
        .glossary-list dt {
            font-size: 1.1em;
            font-weight: bold;
            color: #ffd740; /* ‚¨ÖÔ∏è ‡∏™‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° */
            margin-top: 15px;
            margin-bottom: 5px;
        }
        .glossary-list dd {
            margin-left: 0;
            color: #ddd;
            line-height: 1.6;
            padding-bottom: 10px;
            border-bottom: 1px solid #333;
        }
        .glossary-list dd:last-child {
            border-bottom: none;
        }

        .close-btn {
          color: #aaa; position: absolute; top: 10px; right: 20px;
          font-size: 28px; font-weight: bold;
        }
        .close-btn:hover,
        .close-btn:focus { color: #fff; text-decoration: none; cursor: pointer; }


        /* Prediction Cards */
        .prediction-card-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }
        .prediction-card {
            background-color: #1e1e1e;
            border-radius: 8px;
            padding: 20px;
            min-width: 220px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border-bottom: 4px solid #555;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            position: relative;
        }
        .prediction-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        .card-lstm { border-color: #ff5252; }
        .card-trans { border-color: #40c4ff; }
        .card-tcn { border-color: #ffd740; }

        .card-model-name {
            font-size: 1.2em;
            font-weight: bold;
            color: #eee;
            margin-bottom: 10px;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        .card-model-name.active-lstm { color: #ff5252; }
        .card-model-name.active-trans { color: #40c4ff; }
        .card-model-name.active-tcn { color: #ffd740; }


        .prediction-card .price {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #fff;
        }
        .prediction-card .pct {
            font-size: 1.2em;
            font-weight: 500;
        }
        .prediction-card .card-subtitle {
            font-size: 0.85em;
            color: #aaa;
            margin-top: -5px;
            margin-bottom: 10px;
        }

        /* Flashing animations */
        @keyframes flash-green {
            0%, 100% { color: #00e676; }
            50% { color: white; }
        }
        @keyframes flash-red {
            0%, 100% { color: #ef5350; }
            50% { color: white; }
        }
        .flash-pos {
            animation: flash-green 1.5s infinite ease-in-out;
        }
        .flash-neg {
            animation: flash-red 1.5s infinite ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; }
        }
        /* ‡∏ã‡πà‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô */
        .stock-menu, .tfbar, #graph, #prediction-summary, .page-switch, .tutorial-button, .glossary-button {
            opacity: 0;
            animation-fill-mode: forwards;
        }

        /* Footer Marquee (CSS) */
        @keyframes marquee-scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        .footer-marquee {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #1a1a1a;
            border-top: 1px solid #333;
            z-index: 999;
            overflow: hidden;
        }
        .marquee-content {
            display: flex;
            width: 200%;
            margin: 0;
            animation: marquee-scroll 50s linear infinite;
        }
        .marquee-content span {
            width: 50%;
            padding: 10px 0;
            color: #ccc;
            font-size: 0.9em;
            white-space: nowrap;
        }
        .disclaimer-box { display: none; }


        #particles-js {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-color: #121212;
        }

        /* --- ‚≠êÔ∏è NEW: Keyframes for Typing ‚≠êÔ∏è --- */

        /* Keyframe 1: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ç‡∏¢‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á (‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå) */
        @keyframes typing {
            from { width: 0; }
            /* ‚¨áÔ∏è MODIFIED: ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö font-size ‡πÉ‡∏´‡∏°‡πà */
            to { width: 410px; } /* ‚¨ÖÔ∏è **‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏Ç‡∏ô‡∏µ‡πâ** */
        }

        /* Keyframe 2: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏û‡∏£‡∏¥‡∏ö‡∏Ç‡∏≠‡∏á Caret (‡∏Ç‡∏µ‡∏î‡∏ó‡πâ‡∏≤‡∏¢) */
        @keyframes blink-caret {
            from, to { border-color: transparent; }
            /* ‚¨áÔ∏è MODIFIED: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß */
            50% { border-color: #FFF; }
        }

        /* === Loading Overlay (ADD) === */
        #loading-overlay{
          position: fixed; inset: 0;
          background: rgba(0,0,0,.55);
          display: none; align-items: center; justify-content: center; gap: 14px;
          z-index: 100001;
        }
        #loading-overlay.show{ display: flex; }
        .spinner{
          width: 42px; height: 42px;
          border: 3px solid #2b2b2b; border-top-color: #00c853;
          border-radius: 50%;
          animation: spin .8s linear infinite;
        }
        .loading-text{ color:#00c853; font-weight:700; letter-spacing:.3px; }
        @keyframes spin{ to{ transform: rotate(360deg); } }
    body.modal-open {
    overflow: hidden;     /* ‡πÄ‡∏î‡∏™‡∏Å‡πå‡∏ó‡πá‡∏≠‡∏õ‡∏û‡∏≠‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏î‡πâ‡∏ß‡∏¢ position:fixed ‡πÉ‡∏ô JS */
    }

    /* ‡πÉ‡∏´‡πâ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÇ‡∏°‡∏î‡∏±‡∏•‡πÑ‡∏î‡πâ */
    .modal-content {
      max-height: 80vh;
      overflow: auto;
    }

    /* ‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏™‡∏Å‡∏£‡∏≠‡∏•‡∏´‡∏•‡∏∏‡∏î‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡∏ô‡∏≠‡∏Å‡πÇ‡∏°‡∏î‡∏±‡∏• (Chrome/Android) */
    .modal {
      overscroll-behavior: contain;
    }
    </style>
</head>
<body>
    <div id="particles-js"></div>

    <!-- Loading overlay (ADD) -->
    <div id="loading-overlay" aria-live="polite">
      <div class="spinner" role="progressbar" aria-label="Loading"></div>
      <div class="loading-text">Loading‚Ä¶</div>
    </div>

    <div id="splash-screen">
        <span class="glow-gradient">SmartForecast</span>
        <span class="splash-loading-text">Initializing AI Models...</span>
    </div>

    <a id="tutorial-btn" class="tutorial-button" title="Show Tutorial">? Tutorial</a>

    <a id="glossary-btn" class="glossary-button" title="Show Terms">? Words</a>

    <a class="page-switch" href="/trade" title="Go to Trading Simulator" aria-label="Go to Trading Simulator">
      Trading Simulator ‚Üó
    </a>

    <h2 style="text-align: center;"><span class="glow-gradient">SmartForecast</span></h2>
    <p style="text-align: center; color:#ccc; font-size: 1.0em; margin-top: -10px;">AI-powered stock trend predictions</p>
    <div id="latest-date-info"></div>

    <div class="disclaimer-box"></div>

    <div class="stock-menu" id="stock-menu">
        {% for ticker in tickers %}
          <a href="#" class="stock-link" data-ticker="{{ ticker }}">{{ ticker }}</a>
        {% endfor %}
    </div>

    <div class="tfbar" id="tfbar">
      <span style="color:#bbb; font-weight:1000; margin-right:6px;">Timeframe:</span>
      <button data-tf="4M" class="active">4M</button>
      <button data-tf="6M">6M</button>
      <button data-tf="1Y">1Y</button>
      <button data-tf="ALL">All</button>
    </div>

    <div id="graph"></div>

    <div class="result-box" id="prediction-summary"></div>

    <div id="tutorial-modal" class="modal">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h3 style="text-align: center; color: #40c4ff;">Website Tutorial</h3>
        <p style="text-align: center; margin-top: 15px; color: #ccc;">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏†‡∏≤‡∏û‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ</p>
        <img src="/static/tutorial/tutorial1.png" alt="Tutorial Image">
        <img src="/static/tutorial/tutorial2.png" alt="Tutorial Image">
        <img src="/static/tutorial/tutorial3.png" alt="Tutorial Image">
        <img src="/static/tutorial/tutorial4.png" alt="Tutorial Image">
        <img src="/static/tutorial/tutorial5.png" alt="Tutorial Image">
        <img src="/static/tutorial/tutorial6.png" alt="Tutorial Image">
      </div>
    </div>

   <div id="glossary-modal" class="modal">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h3 style="text-align: center; color: #ffd740;">Words (‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏£‡∏π‡πâ)</h3>

        <div class="glossary-list">
            <dl>
                <dt>LSTM (Long Short-Term Memory)</dt>
                <dd>‡πÇ‡∏°‡πÄ‡∏î‡∏• AI ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏ô‡∏∂‡πà‡∏á (‡∏™‡∏µ‡πÅ‡∏î‡∏á) ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πà‡∏á‡∏Å‡∏≤‡∏à‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏î‡∏à‡∏≥‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏≠‡∏î‡∏µ‡∏ï‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï</dd>

                <dt>Transformer</dt>
                <dd>‡πÇ‡∏°‡πÄ‡∏î‡∏• AI ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏ô‡∏∂‡πà‡∏á  (‡∏™‡∏µ‡∏ü‡πâ‡∏≤) ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πà‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏°‡∏≠‡∏á‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÅ‡∏•‡∏∞‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</dd>

                <dt>TCN+GRU</dt>
                <dd>
                    ‡πÇ‡∏°‡πÄ‡∏î‡∏• AI ‡∏•‡∏π‡∏Å‡∏ú‡∏™‡∏° (Hybrid) (‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á) ‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏°‡∏à‡∏∏‡∏î‡πÅ‡∏Ç‡πá‡∏á‡∏Ç‡∏≠‡∏á AI ‡∏™‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô:<br>
                    <strong>TCN:</strong> ‡πÄ‡∏Å‡πà‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ "‡∏™‡πÅ‡∏Å‡∏ô" ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÜ (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏°‡∏≠‡∏á‡∏†‡∏≤‡∏û‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÜ)<br>
                    <strong>GRU:</strong> ‡πÄ‡∏Å‡πà‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏î‡∏à‡∏≥ "‡∏•‡∏≥‡∏î‡∏±‡∏ö" ‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢ LSTM, ‡∏ä‡πà‡∏ß‡∏¢‡∏à‡∏≥‡∏ß‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏Å‡∏¥‡∏î‡∏Å‡πà‡∏≠‡∏ô-‡∏´‡∏•‡∏±‡∏á)<br>
                    ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô ‡∏°‡∏±‡∏ô‡∏à‡∏∂‡∏á‡πÄ‡∏Å‡πà‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏Å‡∏≤‡∏£‡∏°‡∏≠‡∏á‡∏†‡∏≤‡∏û‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                </dd>

                <hr style="border-color: #444; margin: 15px 0;">

                <dt>‡∏Å‡∏£‡∏≤‡∏ü‡∏£‡∏≤‡∏Ñ‡∏≤ (Price Chart)</dt>
                <dd><strong>‡πÄ‡∏™‡πâ‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß</strong> ‡∏Ñ‡∏∑‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏£‡∏¥‡∏á (Actual Prices) ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡∏™‡∏µ‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡πÅ‡∏î‡∏á, ‡∏ü‡πâ‡∏≤, ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á) ‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏µ‡πà AI ‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï (Forecast)</dd>

                <dt>‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢</dt>
                <dd>
                    ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢ 30 ‡∏ß‡∏±‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≤‡∏Å AI ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÇ‡∏°‡πÄ‡∏î‡∏• ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Å‡∏≥‡πÑ‡∏£/‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô <br>
                    <strong>‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏¥‡πä‡∏Å‡∏ñ‡∏π‡∏Å ‚úîÔ∏è</strong> ‡πÉ‡∏ôcheck-box‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏™‡πâ‡∏ô‡∏Å‡∏£‡∏≤‡∏ü‡∏ô‡∏±‡πâ‡∏ô‡πÜ ‡πÑ‡∏î‡πâ
                </dd>

                <dt>Timeframe (4M, 6M, 1Y, All)</dt>
                <dd>‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏≠‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏ô‡∏Å‡∏£‡∏≤‡∏ü ‡πÄ‡∏ä‡πà‡∏ô 4M ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ã‡∏π‡∏°‡∏Å‡∏£‡∏≤‡∏ü‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á 4 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</dd>

                <dt>Trading Simulator ‚Üó (‡∏õ‡∏∏‡πà‡∏°‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô)</dt>
                <dd>‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ "‡πÄ‡∏ß‡πá‡∏ö‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠-‡∏Ç‡∏≤‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥" ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏≥‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏à‡∏≤‡∏Å AI ‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡∏•‡∏≠‡∏á‡∏ã‡∏∑‡πâ‡∏≠-‡∏Ç‡∏≤‡∏¢‡∏´‡∏∏‡πâ‡∏ô‡πÅ‡∏ö‡∏ö‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠-‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ</dd>

                <dt>‚ö†Ô∏è Disclaimer (‡πÅ‡∏ñ‡∏ö‡∏ß‡∏¥‡πà‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á)</dt>
                <dd>‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö: ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô ‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á ‡πÇ‡∏õ‡∏£‡∏î‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á</dd>

                <hr style="border-color: #444; margin: 15px 0;">

                <dt>‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏∏‡πâ‡∏ô (Stock Menu)</dt>
                <dd>
                    ‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏∏‡πâ‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÑ‡∏î‡πâ ‡∏´‡∏∏‡πâ‡∏ô‡πÄ‡∏î‡πà‡∏ô‡πÜ ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö ‡πÑ‡∏î‡πâ‡πÅ‡∏Å‡πà:
                   <ul style="margin-top: 10px; padding-left: 20px; color: #ccc;">
                        <li><strong>AAPL (Apple)</strong>: ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏≠‡∏¢‡πà‡∏≤‡∏á iPhone, Mac, iPad ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ (Services) ‡πÄ‡∏ä‡πà‡∏ô iCloud, App Store</li>
                        <li><strong>AMZN (Amazon)</strong>: ‡∏¢‡∏±‡∏Å‡∏©‡πå‡πÉ‡∏´‡∏ç‡πà‡∏î‡πâ‡∏≤‡∏ô E-commerce ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡∏ï‡∏•‡∏≤‡∏î Cloud Computing (Amazon Web Services - AWS)</li>
                        <li><strong>GOOGL (Alphabet)</strong>: ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡πÅ‡∏°‡πà‡∏Ç‡∏≠‡∏á Google ‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏•‡∏±‡∏Å‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤ (Google Search, YouTube), ‡∏£‡∏∞‡∏ö‡∏ö Android ‡πÅ‡∏•‡∏∞‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ Cloud</li>
                        <li><strong>META (Meta)</strong>: ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÇ‡∏ã‡πÄ‡∏ä‡∏µ‡∏¢‡∏•‡∏°‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà (Facebook, Instagram, WhatsApp) ‡πÅ‡∏•‡∏∞‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡πÉ‡∏ô Metaverse (Reality Labs)</li>
                        <li><strong>MSFT (Microsoft)</strong>: ‡∏¢‡∏±‡∏Å‡∏©‡πå‡πÉ‡∏´‡∏ç‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡∏≠‡∏ü‡∏ï‡πå‡πÅ‡∏ß‡∏£‡πå (Windows, Microsoft 365) ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ Cloud Computing ‡∏£‡∏≤‡∏¢‡πÉ‡∏´‡∏ç‡πà (Azure) ‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡πÉ‡∏ô AI (OpenAI)</li>
                        <li><strong>NVDA (NVIDIA)</strong>: ‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡∏î‡πâ‡∏≤‡∏ô‡∏ä‡∏¥‡∏õ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• (GPU) ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πà‡∏≠ AI, ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏° (GeForce) ‡πÅ‡∏•‡∏∞‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Data Center)</li>
                        <li><strong>TSLA (Tesla)</strong>: ‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡∏î‡πâ‡∏≤‡∏ô‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ (EV) ‡πÅ‡∏•‡∏∞‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏™‡∏∞‡∏≠‡∏≤‡∏î ‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ä‡∏≤‡∏£‡πå‡∏à Supercharger</li>
                    </ul>
                </dd>

            </dl>
        </div>

      </div>
    </div>

      </div>
    </div>


    <div class="footer-marquee">
        <div class="marquee-content">
            <span>
                ‚ö†Ô∏è <strong>Disclaimer:</strong> This platform is for educational and informational purposes only. It does not constitute financial or investment advice. Trading and investing involve risks, and you should conduct your own research or consult a licensed financial advisor before making investment decisions.
            </span>
            <span>
                ‚ö†Ô∏è <strong>Disclaimer:</strong> This platform is for educational and informational purposes only. It does not constitute financial or investment advice. Trading and investing involve risks, and you should conduct your own research or consult a licensed financial advisor before making investment decisions.
            </span>
        </div>
    </div>


    <script>
        let currentFigure;
        let currentData = null;
        let currentTF = '4M';

        /* === Loading helpers (ADD) === */
        function showLoading(msg){
          $('#loading-overlay .loading-text').text(msg || 'Loading‚Ä¶');
          $('#loading-overlay').addClass('show');
        }
        function hideLoading(){ $('#loading-overlay').removeClass('show'); }

        // ==== Utilities for timeframe ====
        function toISODate(d) { return new Date(d.getTime() - d.getTimezoneOffset()*60000).toISOString().slice(0,10); }
        function addMonths(date, m) {
          const d = new Date(date);
          const day = d.getDate();
          d.setMonth(d.getMonth() + m);
          if (d.getDate() < day) d.setDate(0);
          return d;
        }
        function applyTimeframe(tf, data) {
          if (!data) return;
          const lastFuture = (data.future_dates && data.future_dates.length) ? new Date(data.future_dates[data.future_dates.length-1]) : null;
          const lastActual = (data.actual_dates && data.actual_dates.length) ? new Date(data.actual_dates[data.actual_dates.length-1]) : null;
          const end = lastFuture && (!lastActual || lastFuture > lastActual) ? lastFuture : lastActual;
          if (!end) return;

          let start;
          if (tf === '4M') start = addMonths(end, -4);
          else if (tf === '6M') start = addMonths(end, -6);
          else if (tf === '1Y') start = addMonths(end, -12);
          else {
            start = (data.actual_dates && data.actual_dates.length) ? new Date(data.actual_dates[0]) : new Date(data.future_dates[0]);
          }

          Plotly.relayout('graph', { 'xaxis.range': [toISODate(start), toISODate(end)], 'xaxis.autorange': false });
        }

        function setTFActive(tf) {
          currentTF = tf;
          $('#tfbar button').removeClass('active');
          $(`#tfbar button[data-tf="${tf}"]`).addClass('active');
        }

        // ==== Plot ====
        // ==== Plot ====
        function loadData(ticker) {
            /* ADD: ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡∏ì‡∏∞‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• */
            showLoading('Loading ‚Ä¶');

            currentData = null;
            $('#latest-date-info').text('Loading data...');
            $('#prediction-summary')
                .html('')
                .removeClass('prediction-card-container')
                .addClass('result-box');

            $.getJSON(`/data/${ticker}`, function (data) {
                currentData = data;

                const isLstmChecked = $('#lstm-checkbox').length ? $('#lstm-checkbox').is(':checked') : true;
                const isTransChecked = $('#trans-checkbox').length ? $('#trans-checkbox').is(':checked') : true;
                const isTcnChecked = $('#tcn-checkbox').length ? $('#tcn-checkbox').is(':checked') : true;

                const trace1 = {
                    x: data.actual_dates, y: data.actual_prices, mode: 'lines', name: 'Actual Prices',
                    line: { color: 'green' },
                    hovertemplate: 'Date: %{x}<br>Price: %{y:.2f}<extra></extra>'
                };
                const trace2 = {
                    x: data.future_dates, y: data.lstm_prices, mode: 'lines+markers', name: 'LSTM Prediction',
                    line: { color: '#ff5252' },
                    visible: isLstmChecked ? true : 'legendonly',
                    hovertemplate: 'Date: %{x}<br>Price: %{y:.2f}<extra></extra>'
                };
                const trace3 = {
                    x: data.future_dates, y: data.trans_prices, mode: 'lines+markers', name: 'Transformer Prediction',
                    line: { color: '#40c4ff' },
                    visible: isTransChecked ? true : 'legendonly',
                    hovertemplate: 'Date: %{x}<br>Price: %{y:.2f}<extra></extra>'
                };
                const trace4 = {
                    x: data.future_dates, y: data.tcn_prices, mode: 'lines+markers', name: 'TCN+GRU Prediction',
                    line: { color: '#ffd740' },
                    visible: isTcnChecked ? true : 'legendonly',
                    hovertemplate: 'Date: %{x}<br>Price: %{y:.2f}<extra></extra>'
                };

                const layout = {
                    xaxis: { title: 'Date' },
                    yaxis: { title: 'Price (USD)' ,gridcolor: '#3b3b3b'},
                    plot_bgcolor: "#1a1a1a", paper_bgcolor: "#1a1a1a",
                    font: { color: 'white' },
                    autosize: true,
                    showlegend: false
                };

                Plotly.newPlot('graph', [trace1, trace2, trace3, trace4], layout, { responsive: true }).then(function (figure) {
                    currentFigure = figure;
                    applyTimeframe(currentTF, currentData);
                });

                $('#latest-date-info').text(`üìÖ Latest update ${data.latest_date}`);

                // ‚≠êÔ∏è ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏°‡∏≤‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ß‡πâ
                const current_price = data.actual_prices[data.actual_prices.length - 1].toFixed(2);

                const lstm_future_price = data.lstm_prices[data.lstm_prices.length - 1].toFixed(2);
                const trans_future_price = data.trans_prices[data.trans_prices.length - 1].toFixed(2);
                const tcn_future_price = (data.tcn_prices && data.tcn_prices.length ? data.tcn_prices[data.tcn_prices.length - 1].toFixed(2) : '-');

                const lstmCheckedAttr = isLstmChecked ? 'checked' : '';
                const transCheckedAttr = isTransChecked ? 'checked' : '';
                const tcnCheckedAttr = isTcnChecked ? 'checked' : '';

                // ‚≠êÔ∏è ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï HTML ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á "‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô ‚Üí ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï"
                const lstm_html = `
                  <div class="prediction-card card-lstm">
                    <label class="custom-checkbox">
                        <input type="checkbox" id="lstm-checkbox" ${lstmCheckedAttr}>
                        <span class="checkmark"></span>
                    </label>
                    <label for="lstm-checkbox" class="card-model-name" id="lstm-label-text">LSTM</label>
                    <p class="card-subtitle">30-Day Forecast</p>
                    <div class="price ${data.lstm_return_pct >= 0 ? 'flash-pos' : 'flash-neg'}">
                        ${current_price} ‚Üí ${lstm_future_price} USD
                    </div>
                    <div class="pct ${data.lstm_return_pct >= 0 ? 'flash-pos' : 'flash-neg'}">
                      ${data.lstm_return_pct >= 0 ? 'üìà' : 'üìâ'} ${data.lstm_return_pct.toFixed(2)}%
                    </div>
                  </div>`;

                const trans_html = `
                  <div class="prediction-card card-trans">
                    <label class="custom-checkbox">
                        <input type="checkbox" id="trans-checkbox" ${transCheckedAttr}>
                        <span class="checkmark"></span>
                    </label>
                    <label for="trans-checkbox" class="card-model-name" id="trans-label-text">Transformer</label>
                    <p class="card-subtitle">30-Day Forecast</p>
                    <div class="price ${data.trans_return_pct >= 0 ? 'flash-pos' : 'flash-neg'}">
                        ${current_price} ‚Üí ${trans_future_price} USD
                    </div>
                    <div class="pct ${data.trans_return_pct >= 0 ? 'flash-pos' : 'flash-neg'}">
                      ${data.trans_return_pct >= 0 ? 'üìà' : 'üìâ'} ${data.trans_return_pct.toFixed(2)}%
                    </div>
                  </div>`;

                const tcn_html = (data.tcn_return_pct == null)
                  ? `<div class="prediction-card card-tcn">
                       <label class="custom-checkbox">
                           <input type="checkbox" id="tcn-checkbox" ${tcnCheckedAttr}>
                           <span class="checkmark"></span>
                       </label>
                       <label for="tcn-checkbox" class="card-model-name" id="tcn-label-text">TCN+GRU</label>
                       <p class="card-subtitle">30-Day Forecast</p>
                       <div class="price">-</div>
                       <div class="pct" style="color:#888;">No Data</div>
                     </div>`
                  : `<div class="prediction-card card-tcn">
                       <label class="custom-checkbox">
                           <input type="checkbox" id="tcn-checkbox" ${tcnCheckedAttr}>
                           <span class="checkmark"></span>
                       </label>
                       <label for="tcn-checkbox" class="card-model-name" id="tcn-label-text">TCN+GRU</label>
                       <p class="card-subtitle">30-Day Forecast</p>
                       <div class="price ${data.tcn_return_pct >= 0 ? 'flash-pos' : 'flash-neg'}">
                           ${current_price} ‚Üí ${tcn_future_price} USD
                       </div>
                       <div class="pct ${data.tcn_return_pct >= 0 ? 'flash-pos' : 'flash-neg'}">
                         ${data.tcn_return_pct >= 0 ? 'üìà' : 'üìâ'} ${data.tcn_return_pct.toFixed(2)}%
                       </div>
                     </div>`;

                $('#prediction-summary')
                  .removeClass('result-box')
                  .addClass('prediction-card-container')
                  .html(lstm_html + trans_html + tcn_html);

                updateTraceVisibility();

            }).fail(function(xhr){
                const msg = (xhr.responseJSON && xhr.responseJSON.error) ? xhr.responseJSON.error : 'Load error';
                $('#latest-date-info').text(`‚ö†Ô∏è ${msg}`);
                $('#prediction-summary').html('<p class="neg"><strong>Cannot load predictions for this ticker.</strong></p>');
            }).always(function(){  /* ADD: ‡∏õ‡∏¥‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à */
                hideLoading();
            });
        }

        function updateTraceVisibility() {
            const showLSTM = $('#lstm-checkbox').is(':checked');
            const showTrans = $('#trans-checkbox').is(':checked');
            const showTCN = $('#tcn-checkbox').is(':checked');

            Plotly.restyle('graph', { visible: showLSTM ? true : 'legendonly' }, [1]);
            Plotly.restyle('graph', { visible: showTrans ? true : 'legendonly' }, [2]);
            Plotly.restyle('graph', { visible: showTCN ? true : 'legendonly' }, [3]);

            if ($('#lstm-label-text').length) {
                $('#lstm-label-text').toggleClass('active-lstm', showLSTM);
                $('#trans-label-text').toggleClass('active-trans', showTrans);
                $('#tcn-label-text').toggleClass('active-tcn', showTCN);
            }
        }

        function setActive(ticker) {
            $(".stock-link").removeClass("active");
            $(`.stock-link[data-ticker="${ticker}"]`).addClass("active");
        }


        // ‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è MODIFIED: $(document).ready() ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ñ‡∏π‡∏Å‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà ‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è
        $(document).ready(function () {

            // --- ‚≠êÔ∏è NEW: MATRIX RAIN SETUP ‚≠êÔ∏è ---
            let matrixInterval;
            const canvas = $('<canvas id="matrix-canvas"></canvas>');
            $('#splash-screen').prepend(canvas);
            const ctx = canvas[0].getContext('2d');
            canvas[0].width = window.innerWidth;
            canvas[0].height = window.innerHeight;
            const katakana = '„Ç¢„Ç°„Ç´„Çµ„Çø„Éä„Éè„Éû„É§„É£„É©„ÉØ„Ç¨„Ç∂„ÉÄ„Éê„Éë„Ç§„Ç£„Ç≠„Ç∑„ÉÅ„Éã„Éí„Éü„É™„É∞„ÇÆ„Ç∏„ÉÇ„Éì„Éî„Ç¶„Ç•„ÇØ„Çπ„ÉÑ„Éå„Éï„É†„É¶„É•„É´„Ç∞„Ç∫„Éñ„Éó„Ç®„Çß„Ç±„Çª„ÉÜ„Éç„Éò„É°„É¨„É±„Ç≤„Çº„Éá„Éô„Éö„Ç™„Ç©„Ç≥„ÇΩ„Éà„Éé„Éõ„É¢„É®„Éß„É≠„É≤„Ç¥„Çæ„Éâ„Éú„Éù„É¥„ÉÉ„É≥';
            const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const numbers = '0123456789';
            const characters = (katakana + alphabet + numbers).split('');
            const fontSize = 16;
            const columns = Math.ceil(canvas[0].width / fontSize);
            const drops = [];
            for (let x = 0; x < columns; x++) drops[x] = 1;

            function drawMatrix() {
                ctx.fillStyle = 'rgba(18, 18, 18, 0.05)';
                ctx.fillRect(0, 0, canvas[0].width, canvas[0].height);
                ctx.fillStyle = '#4CAF50';
                ctx.font = fontSize + 'px monospace';
                for (let i = 0; i < drops.length; i++) {
                    const text = characters[Math.floor(Math.random() * characters.length)];
                    ctx.fillText(text, i * fontSize, drops[i] * fontSize);
                    if (drops[i] * fontSize > canvas[0].height && Math.random() > 0.975) {
                        drops[i] = 0;
                    }
                    drops[i]++;
                }
            }
            // --- ‚≠êÔ∏è END MATRIX SETUP ‚≠êÔ∏è ---


            const firstTicker = $(".stock-link").first().data("ticker");
            setActive(firstTicker);

            // --- ‚≠êÔ∏è ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Splash Screen (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏£‡∏£‡∏Å‡∏∞‡πÉ‡∏´‡∏°‡πà‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î) ‚≠êÔ∏è ---

            const splashDuration = 3500;

            // 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö "‡∏ß‡∏¥‡∏ò‡∏µ" ‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ
            const navigationEntries = performance.getEntriesByType("navigation");
            let navType = "";
            if (navigationEntries.length > 0) {
                navType = navigationEntries[0].type;
            }

            // ‚¨áÔ∏è 2. (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï!) ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            const referrer = document.referrer;
            let isInternalNavigation = false;
            try {
                // ‡∏•‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Å‡∏ß‡πà‡∏≤ hostname ‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß == hostname ‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
                if (referrer && new URL(referrer).hostname === window.location.hostname) {
                    isInternalNavigation = true;
                }
            } catch (e) {
                // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ error (‡πÄ‡∏ä‡πà‡∏ô referrer ‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤) ‡∏Å‡πá‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÄ‡∏õ‡πá‡∏ô false
                isInternalNavigation = false;
            }

            // ‚¨áÔ∏è 3. (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï!) ‡∏ï‡∏£‡∏£‡∏Å‡∏∞‡∏Å‡∏≤‡∏£ "‡∏Ç‡πâ‡∏≤‡∏°"
            // ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏Ç‡πâ‡∏≤‡∏° Matrix ‡∏ñ‡πâ‡∏≤...
            //    (A) ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏î Back/Forward
            //    (B) ‡∏´‡∏£‡∏∑‡∏≠ ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£ navigate ‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏£‡∏≤‡πÄ‡∏≠‡∏á (isInternalNavigation)
            const skipSplash = (navType === 'back_forward') || (navType === 'navigate' && isInternalNavigation);


            function showContent() {
                // ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ Dashboard ‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏ï‡∏±‡∏ß
                $('.page-switch').css('animation', 'fadeIn 0.5s ease-out 0.1s forwards');
                $('.tutorial-button').css('animation', 'fadeIn 0.5s ease-out 0.1s forwards');
                $('.glossary-button').css('animation', 'fadeIn 0.5s ease-out 0.1s forwards');
                $('.stock-menu').css('animation', 'fadeIn 0.5s ease-out 0.2s forwards');
                $('.tfbar').css('animation', 'fadeIn 0.5s ease-out 0.3s forwards');
                $('#graph').css('animation', 'fadeIn 0.5s ease-out 0.4s forwards');
                $('#prediction-summary').css('animation', 'fadeIn 0.5s ease-out 0.5s forwards');
            }

            if (skipSplash) {
                // 1. üü¢ ‡∏ñ‡πâ‡∏≤‡∏Å‡∏î Back/Forward ‡∏´‡∏£‡∏∑‡∏≠ ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏Ç‡πâ‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÄ‡∏ß‡πá‡∏ö (skipSplash = true)
                // ‡∏ã‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î, ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•, ‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
                $('#splash-screen').hide(); // ‡∏ã‡πà‡∏≠‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
                loadData(firstTicker);       // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                showContent();             // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ (‡πÅ‡∏ö‡∏ö fade-in)

            } else {
                // 2. üî¥ ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£ "‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å" (navigate ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≤‡∏á‡∏ô‡∏≠‡∏Å) ‡∏´‡∏£‡∏∑‡∏≠ "‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä" (reload)
                // ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö
                matrixInterval = setInterval(drawMatrix, 30); // ‚¨ÖÔ∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏≤‡∏î

                loadData(firstTicker); // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà Splash ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏™‡∏î‡∏á

                setTimeout(function() {
                    $('#splash-screen').addClass('splash-exit'); // ‚¨ÖÔ∏è ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏•‡∏≤‡∏™‡πÉ‡∏´‡∏°‡πà
                    showContent(); // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤

                    setTimeout(function() {
                        $('#splash-screen').hide();
                        clearInterval(matrixInterval); // ‚¨ÖÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏ß‡∏≤‡∏î
                    }, 700); // ‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≠‡∏á transition

                }, splashDuration);
            }

            // --- ‚≠êÔ∏è ‡∏à‡∏ö‡∏™‡πà‡∏ß‡∏ô Splash Screen ‚≠êÔ∏è ---


            // --- ‚≠êÔ∏è Event Handlers (‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î) ‚≠êÔ∏è ---

            $(".stock-link").click(function (e) {
                e.preventDefault();
                const ticker = $(this).data("ticker");
                /* ADD: ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏∏‡πâ‡∏ô */
                showLoading('Loading ‚Ä¶');
                setActive(ticker);
                loadData(ticker);
            });

            $('#tfbar button').click(function(){
                const tf = $(this).data('tf');
                setTFActive(tf);
                applyTimeframe(tf, currentData);
            });

            /* ADD: ‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏î‡∏™‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ */
            $('.page-switch').on('click', function(){
                showLoading('Loading ‚Ä¶');
            });

            $('#prediction-summary').on('change', '#lstm-checkbox', updateTraceVisibility);
            $('#prediction-summary').on('change', '#trans-checkbox', updateTraceVisibility);
            $('#prediction-summary').on('change', '#tcn-checkbox', updateTraceVisibility);

            /* Graph hover interaction */
            const FADE_OPACITY = 0.2;
            const FULL_OPACITY = 1.0;
            const ALL_MODEL_TRACES = [1, 2, 3];

            $('#prediction-summary').on('mouseenter', '.prediction-card', function() {
                if (!currentData) return;
                let traceToHighlight;
                let tracesToFade = [];
                if ($(this).hasClass('card-lstm')) {
                    traceToHighlight = 1; tracesToFade = [2, 3];
                } else if ($(this).hasClass('card-trans')) {
                    traceToHighlight = 2; tracesToFade = [1, 3];
                } else if ($(this).hasClass('card-tcn')) {
                    traceToHighlight = 3; tracesToFade = [1, 2];
                } else { return; }
                Plotly.restyle('graph', { 'opacity': FULL_OPACITY }, [traceToHighlight]);
                if (tracesToFade.length > 0) {
                    Plotly.restyle('graph', { 'opacity': FADE_OPACITY }, tracesToFade);
                }
            }).on('mouseleave', '.prediction-card', function() {
                if (!currentData) return;
                Plotly.restyle('graph', { 'opacity': FULL_OPACITY }, ALL_MODEL_TRACES);
            });


            /* JavaScript for ALL Modals */
            $('#tutorial-btn').click(function() {
                $('#tutorial-modal').css('display', 'flex');
            });
            $('#glossary-btn').click(function() {
                $('#glossary-modal').css('display', 'flex');
            });
            $('.close-btn').click(function() {
                $(this).closest('.modal').css('display', 'none');
            });
            $('.modal').click(function(event) {
              if (event.target === this) {
                $(this).css('display', 'none');
              }
            });
        });
    </script>

    <script>
    particlesJS("particles-js", {
        "particles": {
            "number": {
            "value": 60, // ‡∏õ‡∏£‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏∏‡∏î
            "density": {
                "enable": true,
                "value_area": 800
            }
            },
            "color": {
            "value": "#4CAF50" // ‡∏™‡∏µ‡∏Ç‡∏≠‡∏á‡∏à‡∏∏‡∏î (‡πÄ‡∏ó‡∏≤‡πÄ‡∏Ç‡πâ‡∏°)
            },
            "shape": {
            "type": "circle",
            },
            "opacity": {
            "value": 0.4, // ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏á
            "random": false,
            "anim": {
                "enable": false
            }
            },
            "size": {
            "value": 3,
            "random": true
            },
            "line_linked": {
            "enable": true,
            "distance": 150,
            "color": "#4CAF50", // ‡∏™‡∏µ‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡πâ‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°
            "opacity": 0.3,
            "width": 1
            },
            "move": {
            "enable": true,
            "speed": 1.5, // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà
            "direction": "none",
            "random": false,
            "straight": false,
            "out_mode": "out",
            "bounce": false
            }
        },
        "interactivity": {
            "detect_on": "canvas",
            "events": {
            "onhover": {
                "enable": true,
                "mode": "grab" // ‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å interactive
            },
            "onclick": {
                "enable": false // ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å
            },
            "resize": true
            },
            "modes": {
            "grab": {
                "distance": 140,
                "line_opacity": 0.5
            },
            "bubble": {
                "distance": 400,
                "size": 40,
                "duration": 2,
                "opacity": 8,
                "speed": 3
            },
            "repulse": {
                "distance": 200,
                "duration": 0.4
            },
            "push": {
                "particles_nb": 4
            },
            "remove": {
                "particles_nb": 2
            }
            }
        },
        "retina_detect": true
        });
        // ===== Scroll Lock helpers =====
      const __scrollLock = { y: 0 };
      function lockBodyScroll() {
        __scrollLock.y = window.scrollY || document.documentElement.scrollTop || 0;
        document.body.classList.add('modal-open');
        document.body.style.position = 'fixed';
        document.body.style.top = `-${__scrollLock.y}px`;
        document.body.style.width = '100%';
      }
      function unlockBodyScroll() {
        document.body.classList.remove('modal-open');
        document.body.style.position = '';
        document.body.style.top = '';
        document.body.style.width = '';
        window.scrollTo(0, __scrollLock.y);
      }

      // ===== Open / Close helpers =====
      function openModal(sel) {
        lockBodyScroll();
        $(sel).css('display','flex');
      }
      function closeModal(elOrSel) {
        const $m = (elOrSel instanceof HTMLElement) ? $(elOrSel) : $(elOrSel);
        $m.css('display','none');
        unlockBodyScroll();
      }

      // ===== Hook ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏∞‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á =====
      // (‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ .css('display','flex') / .css('display','none'))
      $('#tutorial-btn').off('click').on('click', function(){ openModal('#tutorial-modal'); });
      $('#glossary-btn').off('click').on('click', function(){ openModal('#glossary-modal'); });

      $('.close-btn').off('click').on('click', function(){ closeModal($(this).closest('.modal')[0]); });

      // ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î
      $('.modal').off('click').on('click', function(e){
        if (e.target === this) closeModal(this);
      });

      // ‡∏Å‡∏±‡∏ô‡∏™‡∏Å‡∏£‡∏≠‡∏•‡∏´‡∏•‡∏∏‡∏î‡πÑ‡∏õ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á (iOS ‡∏ö‡∏≤‡∏á‡∏Å‡∏£‡∏ì‡∏µ)
      $('.modal').on('wheel touchmove', function(e){
        if (e.target === this) e.preventDefault();
      });
    </script>

</body>
</html>
